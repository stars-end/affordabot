# Bug Fixes Implementation Plan
**ID:** bug-fixes-1220-0619  
**Epic:** `affordabot-xxry`  
**Created:** 2025-12-20 06:19 PST

---

## Execution Strategy

### Stream A (Main Agent)
1. Delete lockfile workflow → Fix CI
2. Investigate Backend CI failure  
3. Verify Railway backend deployment

### Stream B (Jules #1) — Infrastructure
1. Fix MinIO DNS (`affordabot-9ri`)
2. Fix PgVector DNS (`affordabot-xi3`)

### Stream C (Jules #2) — Schema & Data
1. Schema migrations (`affordabot-xgd`, `tdv`, `bol`)
2. GlassBox service fix (`affordabot-i44`)

### Stream D (Jules #3) — LLM
1. Z.ai ResearchAgent fix (`affordabot-29f.2`)

---

## Phase 1: CI Green (Main Agent)

### 1.1 Delete Lockfile Workflow
- **Why:** Redundant with `pnpm install --frozen-lockfile` and `poetry install` in CI
- **Action:** Delete `.github/workflows/lockfile-validation.yml`

### 1.2 Fix Backend CI
- Investigate actual failure in `Backend Lint & Test`
- Fix any lint/test errors

---

## Phase 2: Railway Green (Main Agent)

### 2.1 Verify Backend Deployment
- PR #154 merged with git dependency fix
- Confirm deployment succeeds

---

## Jules Tasks (Parallel)

| Task | Beads ID | Status | Spec |
|------|----------|--------|------|
| Fix MinIO DNS | `affordabot-9ri` | jules-ready | Use public MinIO URL, not internal |
| Fix PgVector DNS | `affordabot-xi3` | jules-ready | Use `$DATABASE_URL` env var |
| Schema migrations | `affordabot-xgd` | jules-ready | Create SQL migration file |
| GlassBox service | `affordabot-i44` | jules-ready | Read from DB not flat files |
| Z.ai ResearchAgent | `affordabot-29f.2` | jules-ready | Fix message payload format |

---

## Verification

```bash
gh run list --branch master --limit 3   # CI status
railway logs --build                     # Railway build logs
jules remote list --session              # Jules progress
```

---

## Success Criteria
- [ ] CI all green
- [ ] Railway backend green
- [ ] Jules tasks completed and merged
