id: full_admin_e2e
description: "Complete E2E: Dashboard → Discovery → Jurisdiction → Review workflow"
persona: admin_operator
priority: P0
timeout_seconds: 180
goals:
  - "Verify complete admin workflow from login to review"
  - "Test navigation between all major sections"
  - "Confirm data flows correctly between pages"
  - "Verify no errors throughout the entire flow"
start_url: "/admin"
steps:
  # Phase 1: Dashboard entry
  - action: navigate
    path: "/admin"
    description: "Navigate to Admin Dashboard"

  - action: wait_for_selector
    selector: "[data-testid='admin-dashboard']"
    description: "Verify dashboard loads"

  # Phase 2: Discovery search
  - action: navigate
    path: "/admin/discovery"
    description: "Navigate to Discovery"

  - action: wait_for_selector
    selector: "[data-testid='run-discovery-btn']"
    description: "Verify discovery controls present"

  # Phase 3: View sources
  - action: navigate
    path: "/admin/sources"
    description: "Navigate to Sources"

  - action: wait_for_selector
    selector: "[data-testid='sources-list']"
    description: "Verify sources list"

  # Phase 4: Jurisdiction detail
  - action: navigate
    path: "/admin/jurisdictions/san-jose"
    description: "Navigate to San Jose Dashboard"

  - action: wait_for_selector
    selector: "[data-testid='jurisdiction-dashboard']"
    description: "Verify San Jose dashboard loads"

  - action: assert_text
    selector: "body"
    text: "Bills by Impact"
    description: "Verify bills list present"

  # Phase 5: Prompts configuration
  - action: navigate
    path: "/admin/prompts"
    description: "Navigate to Prompts"

  - action: wait_for_selector
    selector: "[data-testid='system-prompts-list']"
    description: "Verify prompts listed"

  # Phase 6: Review queue
  - action: navigate
    path: "/admin/reviews"
    description: "Navigate to Reviews"

  - action: wait_for_selector
    selector: "[data-testid='template-reviews-queue']"
    description: "Verify review queue"

  # Phase 7: Return to dashboard
  - action: navigate
    path: "/admin"
    description: "Return to Admin"

  - action: wait_for_selector
    selector: "[data-testid='admin-dashboard']"
    description: "Verify dashboard re-loads"

metadata:
  requires_real_clerk: true
  auth_redirect_check_path: "/admin"
  tags: ["admin", "e2e", "full-flow"]
  priority: 0
  estimated_duration_seconds: 120
