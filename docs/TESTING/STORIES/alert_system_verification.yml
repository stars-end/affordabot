id: alert_system_verification
description: "Verify that critical triggers (e.g. P0 High Impact) generate admin alerts"
persona: admin_operator
priority: P1
timeout_seconds: 90
goals:
  - "Verify 'High Impact' analysis triggers an alert in the dashboard"
  - "Confirm alert visibility in Jurisdiction view"
  - "Test 'Mark as Read' / 'Dismiss' workflow"
start_url: "/admin/jurisdiction/san-jose"
steps:
  - action: navigate
    path: "/admin/jurisdictions/san-jose"
    description: "Navigate to Jurisdiction View"

  - action: wait_for_selector
    selector: "[data-testid='alerts-widget']"
    description: "Verify alerts widget presence"

  - action: assert_visible
    selector: "[data-testid='alert-item-high-impact']"
    description: "Verify High Impact alert visibility"

  - action: click
    selector: "[data-testid='dismiss-alert-btn-first']"
    description: "Dismiss an alert"

  - action: assert_text
    selector: "[data-testid='alerts-count']"
    text: "0" # Hypothetical if only one alert
    optional: true
    description: "Check if count decreases"

metadata:
  wait_after_login_ms: 2000
  tags: ["workflow", "alerts", "rigor"]
  priority: 1
